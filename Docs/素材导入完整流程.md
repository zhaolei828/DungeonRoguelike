# SPDç´ æå¯¼å…¥å®Œæ•´æµç¨‹

## ğŸ¯ é‡è¦è¯´æ˜

### åœºæ™¯é—®é¢˜
æ‰€æœ‰ç´ æå‡†å¤‡å·¥ä½œ**ä¸éœ€è¦ä»»ä½•åœºæ™¯**ï¼
- âœ… åˆ‡å‰²Sprite - Editorå·¥å…·ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥è¿è¡Œ
- âœ… åˆ›å»ºPalette - Editorå·¥å…·ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥è¿è¡Œ
- âœ… é…ç½®LevelRenderer - åœ¨Hierarchyä¸­é…ç½®GameObject
- ğŸ® æµ‹è¯•æ•ˆæœ - åœ¨ `TestDungeon.unity` åœºæ™¯ä¸­Play

### å¯ä»¥é‡å¤æ‰§è¡Œå—ï¼Ÿ
**å®Œå…¨å¯ä»¥ï¼**æ‰€æœ‰å·¥å…·éƒ½æ”¯æŒå¤šæ¬¡æ‰§è¡Œï¼š
- âœ… Auto Slice Sprites - å¯ä»¥é‡å¤è¿è¡Œï¼ŒUnityä¼šè¦†ç›–ä¹‹å‰çš„åˆ‡å‰²
- âœ… Create Tile Palettes - å¯ä»¥é‡å¤è¿è¡Œï¼Œä¼šé‡æ–°åˆ›å»ºTile Assets
- âœ… é…ç½®LevelRenderer - éšæ—¶å¯ä»¥ä¿®æ”¹Tileå¼•ç”¨

---

## ğŸ“‹ å®Œæ•´æ“ä½œæµç¨‹

### ç¬¬0æ­¥ï¼šç¡®è®¤ç´ æå·²å¤åˆ¶ï¼ˆå·²å®Œæˆï¼‰âœ…

ç´ æä½ç½®ï¼š
```
Assets/_Project/Art/Tiles/Environment/
â”œâ”€â”€ tiles_sewers.png
â”œâ”€â”€ tiles_prison.png
â”œâ”€â”€ tiles_caves.png
â”œâ”€â”€ tiles_city.png
â”œâ”€â”€ tiles_halls.png
â”œâ”€â”€ terrain_features.png
â””â”€â”€ Water/
    â”œâ”€â”€ water0.png
    â”œâ”€â”€ water1.png
    â”œâ”€â”€ water2.png
    â”œâ”€â”€ water3.png
    â””â”€â”€ water4.png
```

**å¦‚ä½•æ£€æŸ¥**ï¼šåœ¨Unity Projectçª—å£å¯¼èˆªåˆ°ä¸Šè¿°è·¯å¾„ï¼Œç¡®è®¤æ–‡ä»¶å­˜åœ¨ã€‚

---

### ç¬¬1æ­¥ï¼šåˆ‡å‰²Spriteï¼ˆ1-2åˆ†é’Ÿï¼‰

#### æ“ä½œæ­¥éª¤ï¼š

1. **æ‰“å¼€å·¥å…·çª—å£**
   - Unityé¡¶éƒ¨èœå•ï¼š`DungeonRoguelike > SPD Tools > Auto Slice Sprites`
   - ä¼šå¼¹å‡ºä¸€ä¸ªå·¥å…·çª—å£

2. **ç‚¹å‡»åˆ‡å‰²æŒ‰é’®**
   - ç‚¹å‡»çª—å£ä¸­çš„ **"åˆ‡å‰²æ‰€æœ‰åœ°å½¢Tile (16x16)"** å¤§æŒ‰é’®
   - ç­‰å¾…è¿›åº¦æ¡ï¼ˆå¦‚æœæœ‰ï¼‰

3. **æŸ¥çœ‹ç»“æœ**
   - ä¼šå¼¹å‡ºå¯¹è¯æ¡†æ˜¾ç¤ºï¼š`âœ… æˆåŠŸåˆ‡å‰²: 6/6` ï¼ˆæˆ–ç±»ä¼¼ä¿¡æ¯ï¼‰
   - ç‚¹å‡» **"ç¡®å®š"**

4. **éªŒè¯åˆ‡å‰²ç»“æœï¼ˆå¯é€‰ï¼‰**
   
   **æ–¹æ³•1ï¼šæŸ¥çœ‹Console**
   - ç‚¹å‡»å·¥å…·çª—å£ä¸­çš„ **"æ‰“å¼€ConsoleæŸ¥çœ‹è¯¦ç»†æ—¥å¿—"** æŒ‰é’®
   - æˆ– Unityé¡¶éƒ¨èœå•ï¼š`Window > General > Console`
   - ä½ ä¼šçœ‹åˆ°ç±»ä¼¼çš„æ—¥å¿—ï¼š
     ```
     âœ“ åˆ‡å‰²æˆåŠŸ: tiles_sewers.png
     âœ“ åˆ‡å‰²æˆåŠŸ: tiles_prison.png
     âœ“ åˆ‡å‰²æˆåŠŸ: tiles_caves.png
     âœ“ åˆ‡å‰²æˆåŠŸ: tiles_city.png
     âœ“ åˆ‡å‰²æˆåŠŸ: tiles_halls.png
     âœ“ åˆ‡å‰²æˆåŠŸ: terrain_features.png
     ```
   
   **æ–¹æ³•2ï¼šæŸ¥çœ‹Sprite**
   - åœ¨Projectçª—å£é€‰æ‹©ä»»æ„PNGï¼ˆå¦‚ `tiles_sewers.png`ï¼‰
   - ç‚¹å‡»å·¦ä¾§çš„å°ä¸‰è§’ â–¶ å±•å¼€
   - ä½ ä¼šçœ‹åˆ°å¾ˆå¤šå­Spriteï¼ˆå¦‚ `tiles_sewers_0_0`, `tiles_sewers_0_1` ç­‰ï¼‰
   - è¿™å°±è¯´æ˜åˆ‡å‰²æˆåŠŸäº†ï¼

#### å¸¸è§é—®é¢˜ï¼š

**Q: å¼¹å‡ºå¯¹è¯æ¡†è¯´ "å¤±è´¥: 6"**
- æ£€æŸ¥PNGæ–‡ä»¶æ˜¯å¦åœ¨æ­£ç¡®ä½ç½®
- é€‰æ‹©PNGï¼Œåœ¨Inspectorä¸­ç¡®è®¤ `Texture Type` æ˜¯ `Sprite (2D and UI)`

**Q: Consoleæœ‰å¾ˆå¤šè­¦å‘Š**
- å¿½ç•¥å…³äºLF/CRLFçš„è­¦å‘Šï¼ˆè¿™æ˜¯Gitæ¢è¡Œç¬¦é—®é¢˜ï¼Œä¸å½±å“åŠŸèƒ½ï¼‰

**Q: å¯ä»¥é‡å¤è¿è¡Œå—ï¼Ÿ**
- å®Œå…¨å¯ä»¥ï¼Unityä¼šè‡ªåŠ¨è¦†ç›–ä¹‹å‰çš„åˆ‡å‰²ç»“æœ

---

### ç¬¬2æ­¥ï¼šåˆ›å»ºTile Paletteï¼ˆ1-2åˆ†é’Ÿï¼‰

#### æ“ä½œæ­¥éª¤ï¼š

1. **æ‰“å¼€å·¥å…·çª—å£**
   - Unityé¡¶éƒ¨èœå•ï¼š`DungeonRoguelike > SPD Tools > Create Tile Palettes`
   - ä¼šå¼¹å‡ºä¸€ä¸ªå·¥å…·çª—å£

2. **ç‚¹å‡»åˆ›å»ºæŒ‰é’®**
   - ç‚¹å‡»çª—å£ä¸­çš„ **"ğŸ¨ åˆ›å»ºæ‰€æœ‰Tile Palette"** å¤§æŒ‰é’®
   - ç­‰å¾…å¤„ç†ï¼ˆå¯èƒ½éœ€è¦1-2åˆ†é’Ÿï¼Œå› ä¸ºè¦åˆ›å»ºçº¦840ä¸ªTile Assetsï¼‰

3. **æŸ¥çœ‹ç»“æœ**
   - ä¼šå¼¹å‡ºå¯¹è¯æ¡†æ˜¾ç¤ºï¼š
     ```
     æˆåŠŸåˆ›å»º 6/6 ä¸ªTile Paletteï¼
     
     æŸ¥çœ‹ä½ç½®: Assets/_Project/Art/Tiles/Palettes/
     ```
   - ç‚¹å‡» **"ç¡®å®š"**

4. **éªŒè¯åˆ›å»ºç»“æœ**
   
   **æ–¹æ³•1ï¼šæŸ¥çœ‹Paletteæ–‡ä»¶**
   - åœ¨Projectçª—å£å¯¼èˆªåˆ°ï¼š`Assets/_Project/Art/Tiles/Palettes/`
   - ä½ ä¼šçœ‹åˆ°6ä¸ªPrefabæ–‡ä»¶ï¼š
     - SewersTilePalette
     - PrisonTilePalette
     - CavesTilePalette
     - CityTilePalette
     - HallsTilePalette
     - FeaturesTilePalette
   
   **æ–¹æ³•2ï¼šæŸ¥çœ‹Tile Assets**
   - åœ¨Projectçª—å£å¯¼èˆªåˆ°ï¼š`Assets/_Project/Art/Tiles/TileAssets/`
   - ä½ ä¼šçœ‹åˆ°6ä¸ªå­æ–‡ä»¶å¤¹ï¼Œæ¯ä¸ªåŒ…å«å¾ˆå¤š `.asset` æ–‡ä»¶
   - è¿™äº›å°±æ˜¯Tile Assetsï¼

   **æ–¹æ³•3ï¼šæŸ¥çœ‹Console**
   - Consoleä¼šæ˜¾ç¤ºè¯¦ç»†çš„åˆ›å»ºæ—¥å¿—

#### å¸¸è§é—®é¢˜ï¼š

**Q: æŠ¥é”™ "è´´å›¾æœªåˆ‡å‰²"**
- å…ˆè¿è¡Œç¬¬1æ­¥çš„ `Auto Slice Sprites`

**Q: åˆ›å»ºå¾ˆæ…¢**
- æ­£å¸¸ï¼840ä¸ªTile Assetséœ€è¦æ—¶é—´ï¼Œè€å¿ƒç­‰å¾…

**Q: å¯ä»¥é‡å¤è¿è¡Œå—ï¼Ÿ**
- å¯ä»¥ï¼ä¼šè¦†ç›–ä¹‹å‰åˆ›å»ºçš„Tile Assetså’ŒPalette

---

### ç¬¬3æ­¥ï¼šé…ç½®LevelRendererï¼ˆ5åˆ†é’Ÿï¼‰

#### æ“ä½œæ­¥éª¤ï¼š

1. **æ‰“å¼€TestDungeonåœºæ™¯**
   - åœ¨Projectçª—å£å¯¼èˆªåˆ°ï¼š`Assets/_Project/Scenes/TestDungeon.unity/`
   - åŒå‡» `TestDungeon.unity` æ‰“å¼€åœºæ™¯

2. **æ‰¾åˆ°LevelRenderer GameObject**
   - åœ¨Hierarchyçª—å£æŸ¥æ‰¾ `LevelRendererObject`
   - æˆ–è€…ç›´æ¥æœç´¢ `LevelRenderer`
   - é€‰æ‹©å®ƒ

3. **æŸ¥çœ‹Inspectoré¢æ¿**
   - ç¡®ä¿æœ‰ `LevelRenderer` ç»„ä»¶
   - å±•å¼€ **"Tileèµ„æº"** éƒ¨åˆ†
   - ä½ ä¼šçœ‹åˆ°å¾ˆå¤šç©ºçš„å­—æ®µï¼š
     ```
     Floor Tile: None
     Wall Tile: None
     Water Tile: None
     ...
     ```

4. **åˆ†é…Tileï¼ˆå¿«é€Ÿæ–¹æ³•ï¼‰**
   
   **æœ€ç®€å•ï¼šåªé…ç½®Floorå’ŒWall**
   
   a. åœ¨Projectçª—å£å¯¼èˆªåˆ°ï¼š
      ```
      Assets/_Project/Art/Tiles/TileAssets/SewersTilePalette/
      ```
   
   b. éšä¾¿é€‰ä¸€ä¸ªTileï¼ˆæ¯”å¦‚ `tiles_sewers_0_0`ï¼‰
      - æ‹–åˆ°Inspectorçš„ `Floor Tile` å­—æ®µ
   
   c. å†é€‰ä¸€ä¸ª**ä¸åŒ**çš„Tileï¼ˆæ¯”å¦‚ `tiles_sewers_4_0`ï¼Œé€šå¸¸æ˜¯å¢™å£ï¼‰
      - æ‹–åˆ°Inspectorçš„ `Wall Tile` å­—æ®µ
   
   d. å®Œæˆï¼è‡³å°‘åœ°æ¿å’Œå¢™å£ä¼šæœ‰ä¸åŒé¢œè‰²äº†

5. **åˆ†é…æ›´å¤šTileï¼ˆå¯é€‰ï¼‰**
   
   å¦‚æœæƒ³è¦æ›´å®Œæ•´çš„æ•ˆæœï¼Œå¯ä»¥ç»§ç»­é…ç½®ï¼š
   
   - **Water Tile**: 
     - å¯¼èˆªåˆ° `Assets/_Project/Art/Tiles/Environment/Water/`
     - é€‰æ‹© `water0.png` ä¸‹çš„Spriteï¼ˆä¸æ˜¯PNGæœ¬èº«ï¼‰
     - æ‹–åˆ° `Water Tile` å­—æ®µ
   
   - **Grass Tile**: 
     - ä» `FeaturesTilePalette` æ–‡ä»¶å¤¹æ‰¾è‰åœ°å›¾æ¡ˆçš„Tile
   
   - **Door Tile**: 
     - ä» `FeaturesTilePalette` æ–‡ä»¶å¤¹æ‰¾é—¨å›¾æ¡ˆçš„Tile
   
   - **Entrance/Exit Tile**: 
     - ä» `FeaturesTilePalette` æ–‡ä»¶å¤¹æ‰¾æ¥¼æ¢¯å›¾æ¡ˆçš„Tile

#### å¦‚ä½•è¯†åˆ«Tileæ˜¯ä»€ä¹ˆï¼Ÿ

**æ–¹æ³•1ï¼šé¢„è§ˆ**
- åœ¨Projectçª—å£é€‰æ‹©Tile Asset
- çœ‹Inspectorä¸‹æ–¹çš„é¢„è§ˆå›¾

**æ–¹æ³•2ï¼šåç§°**
- Tileå‘½åè§„åˆ™ï¼š`tiles_sewers_Y_X`
  - Y = è¡Œå·ï¼ˆç¬¬å‡ è¡Œï¼‰
  - X = åˆ—å·ï¼ˆç¬¬å‡ åˆ—ï¼‰
- é€šå¸¸ï¼š
  - ç¬¬0-1è¡Œï¼šåœ°æ¿ç±»
  - ç¬¬4-5è¡Œï¼šå¢™å£ç±»
  - ç¬¬2-3è¡Œï¼šæ°´ã€è‰ç±»

**æ–¹æ³•3ï¼šæŸ¥çœ‹åŸå›¾**
- åœ¨Projectçª—å£åŒå‡»PNGæ–‡ä»¶ï¼ˆå¦‚ `tiles_sewers.png`ï¼‰
- ä¼šæ‰“å¼€Sprite Editorï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰Tileçš„å¸ƒå±€

---

### ç¬¬4æ­¥ï¼šæµ‹è¯•æ•ˆæœï¼ˆ1åˆ†é’Ÿï¼‰

#### æ“ä½œæ­¥éª¤ï¼š

1. **ç¡®è®¤åœ¨TestDungeonåœºæ™¯**
   - åœºæ™¯åç§°åº”è¯¥æ˜¾ç¤ºåœ¨Hierarchyçª—å£é¡¶éƒ¨

2. **ç‚¹å‡»PlayæŒ‰é’®** â–¶ï¸
   - Unityé¡¶éƒ¨ä¸­é—´çš„ä¸‰è§’å½¢æ’­æ”¾æŒ‰é’®
   - è¿›å…¥Playæ¨¡å¼

3. **æŒ‰Gé”®ç”Ÿæˆåœ°ç‰¢**
   - åœ¨Gameè§†å›¾ä¸­æŒ‰é”®ç›˜ `G` é”®
   - åœ°ç‰¢ä¼šé‡æ–°ç”Ÿæˆ

4. **æŸ¥çœ‹æ•ˆæœ**
   - ä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š
     - âœ… ä¸å†æ˜¯ç©ºç™½çš„é»‘å±
     - âœ… æœ‰ä¸åŒé¢œè‰²/å›¾æ¡ˆçš„åœ°æ¿å’Œå¢™å£
     - âœ… çœŸå®çš„SPDåƒç´ è‰ºæœ¯ï¼

5. **åå¤æµ‹è¯•**
   - å¯ä»¥å¤šæ¬¡æŒ‰Gé”®ï¼Œæ¯æ¬¡ç”Ÿæˆä¸åŒçš„åœ°ç‰¢
   - å¦‚æœè¿˜æ˜¯ç©ºç™½æˆ–æŠ¥é”™ï¼ŒæŸ¥çœ‹Consoleçª—å£

6. **é€€å‡ºPlayæ¨¡å¼**
   - å†æ¬¡ç‚¹å‡»PlayæŒ‰é’®æˆ–æŒ‰ `Ctrl+P` / `Cmd+P`

---

## ğŸ” å¦‚ä½•æŸ¥çœ‹æ‰§è¡Œç»“æœ

### Consoleçª—å£ï¼ˆæœ€è¯¦ç»†ï¼‰

æ‰“å¼€æ–¹å¼ï¼š
- Unityé¡¶éƒ¨èœå•ï¼š`Window > General > Console`
- å¿«æ·é”®ï¼š`Ctrl+Shift+C` (Windows) æˆ– `Cmd+Shift+C` (Mac)

ä½ ä¼šçœ‹åˆ°ï¼š
```
=== å¼€å§‹è‡ªåŠ¨åŒ–æµ‹è¯•åœ°ç‰¢ç”Ÿæˆ ===
[SPDå¯¼å…¥] å·²é…ç½®: tiles_sewers.png
[SPDå¯¼å…¥] å·²é…ç½®: tiles_prison.png
...
âœ“ åˆ‡å‰²æˆåŠŸ: tiles_sewers.png
âœ“ åˆ‡å‰²æˆåŠŸ: tiles_prison.png
...
--- åˆ›å»º SewersTilePalette ---
æ‰¾åˆ° 224 ä¸ªSprite
âœ“ åˆ›å»ºäº† 224 ä¸ªæ–°Tile Assets
âœ“ Paletteå·²åˆ›å»º: Assets/_Project/Art/Tiles/Palettes/SewersTilePalette.prefab
...
```

### å·¥å…·çª—å£ï¼ˆå¿«é€ŸæŸ¥çœ‹ï¼‰

- åœ¨ `Auto Slice Sprites` çª—å£ä¸­ä¼šæ˜¾ç¤ºï¼š
  ```
  âœ… åˆ‡å‰²å®Œæˆï¼
  æˆåŠŸ: 6/6
  å¤±è´¥: 0
  ```

- åœ¨ `Create Tile Palettes` çª—å£ä¸­ä¼šæ˜¾ç¤ºæˆåŠŸæ•°é‡

### å¼¹å‡ºå¯¹è¯æ¡†ï¼ˆæœ€ç›´è§‚ï¼‰

æ¯ä¸ªå·¥å…·æ‰§è¡Œå®Œéƒ½ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†æ˜¾ç¤ºç»“æœã€‚

---

## âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šå·¥å…·èœå•çœ‹ä¸åˆ°
**ç—‡çŠ¶**ï¼šUnityé¡¶éƒ¨æ²¡æœ‰ `DungeonRoguelike` èœå•

**è§£å†³**ï¼š
1. ç­‰å¾…Unityç¼–è¯‘å®Œæˆï¼ˆæŸ¥çœ‹å³ä¸‹è§’çŠ¶æ€æ ï¼‰
2. å¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œé‡å¯Unityç¼–è¾‘å™¨

---

### é—®é¢˜2ï¼šåˆ‡å‰²å¤±è´¥
**ç—‡çŠ¶**ï¼šå¯¹è¯æ¡†æ˜¾ç¤º "å¤±è´¥: 6"

**è§£å†³**ï¼š
1. æ£€æŸ¥PNGæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
   ```
   Assets/_Project/Art/Tiles/Environment/tiles_sewers.png
   ```
2. é€‰æ‹©PNGï¼Œåœ¨Inspectorä¸­ç¡®è®¤ï¼š
   - `Texture Type`: Sprite (2D and UI)
   - `Sprite Mode`: Multiple

---

### é—®é¢˜3ï¼šåˆ›å»ºPaletteå¤±è´¥
**ç—‡çŠ¶**ï¼šå¯¹è¯æ¡†æ˜¾ç¤º "æˆåŠŸåˆ›å»º 0/6"

**è§£å†³**ï¼š
1. å…ˆè¿è¡Œ `Auto Slice Sprites`
2. æ£€æŸ¥Consoleçš„é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤Spriteå·²åˆ‡å‰²ï¼ˆPNGä¸‹æœ‰å­Spriteï¼‰

---

### é—®é¢˜4ï¼šPlayåè¿˜æ˜¯ç©ºç™½
**ç—‡çŠ¶**ï¼šæŒ‰Gé”®åGameè§†å›¾è¿˜æ˜¯é»‘å±

**è§£å†³**ï¼š
1. æ£€æŸ¥LevelRendereræ˜¯å¦é…ç½®äº† `Floor Tile` å’Œ `Wall Tile`
2. æ£€æŸ¥Consoleæ˜¯å¦æœ‰é”™è¯¯
3. ç¡®è®¤åœ¨TestDungeonåœºæ™¯ä¸­
4. ç¡®è®¤Tilemapå·²è‡ªåŠ¨æ‰¾åˆ°ï¼ˆConsoleåº”è¯¥æœ‰ "è‡ªåŠ¨æ‰¾åˆ°GroundTilemap" æ—¥å¿—ï¼‰

---

### é—®é¢˜5ï¼šåœ°å›¾æ˜¾ç¤ºä½†éƒ½æ˜¯åŒä¸€ä¸ªé¢œè‰²
**ç—‡çŠ¶**ï¼šåœ°å›¾æœ‰äº†ï¼Œä½†åœ°æ¿å’Œå¢™å£çœ‹èµ·æ¥ä¸€æ ·

**è§£å†³**ï¼š
- Floor Tile å’Œ Wall Tile ä½¿ç”¨äº†åŒä¸€ä¸ªTile
- é‡æ–°åˆ†é…ä¸åŒçš„Tile

---

## ğŸ“Š é¢„æœŸç»“æœç»Ÿè®¡

å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼š

```
âœ… åˆ‡å‰²çš„Spriteæ•°é‡ï¼šçº¦840ä¸ª
âœ… åˆ›å»ºçš„Tile Assetsï¼šçº¦840ä¸ª
âœ… åˆ›å»ºçš„Paletteï¼š6ä¸ª
âœ… é…ç½®çš„LevelRendererå­—æ®µï¼šè‡³å°‘2ä¸ªï¼ˆFloorå’ŒWallï¼‰
âœ… åœ°ç‰¢æ•ˆæœï¼šå¯è§çš„SPDåƒç´ è‰ºæœ¯
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

å®Œæˆç´ æå¯¼å…¥åï¼Œä½ å¯ä»¥ï¼š

1. **ç»§ç»­Week 5** - ç©å®¶ç³»ç»Ÿå¼€å‘
2. **ä¼˜åŒ–Tileé…ç½®** - é…ç½®æ›´å¤šçš„åœ°å½¢ç±»å‹
3. **åˆ›å»ºæ°´åŠ¨ç”»** - è®©æ°´æµåŠ¨èµ·æ¥
4. **å¯¼å…¥è§’è‰²Sprite** - ä¸ºWeek 5åšå‡†å¤‡

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.1  
**æœ€åæ›´æ–°**: 2025-10-17  
**çŠ¶æ€**: ğŸŸ¢ å·²æµ‹è¯•ï¼Œå¯ç›´æ¥ä½¿ç”¨

ğŸ¨ æŒ‰ç…§è¿™ä¸ªæµç¨‹æ“ä½œï¼Œç»å¯¹æ²¡é—®é¢˜ï¼

# ç¬¬5é˜¶æ®µ: HeroåŠ¨ç”»ç³»ç»ŸéªŒè¯

## é—®é¢˜èƒŒæ™¯

åœ¨Week 5å®ç°çš„Heroè¿åŠ¨ç³»ç»Ÿä¸­ï¼Œå‘ç°Heroç§»åŠ¨åŠ¨ç”»çœ‹èµ·æ¥"å¥‡æ€ª"ï¼Œåƒ"å¤šå¼ å›¾åœ¨åˆ‡æ¢ä¸€æ ·"ã€‚ç»è¿‡åˆ†æï¼Œè¿™æ˜¯å› ä¸ºåŸæœ¬çš„åŠ¨ç”»åŠ è½½å’Œæ’­æ”¾é€»è¾‘å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

### åŸé—®é¢˜

1. **æ— æ³•æ­£ç¡®è¯†åˆ«animatoråŠ è½½çš„sprites** - HeroAnimatorå°è¯•ä»ResourcesåŠ è½½ï¼Œä½†warrior.pngå¯èƒ½ä¸åœ¨Resourcesæ–‡ä»¶å¤¹ä¸­
2. **Spriteå‘½åç†è§£æœ‰è¯¯** - warrior.pngä½¿ç”¨çš„æ˜¯`warrior_X_Y`æ ¼å¼ï¼ˆX=åŠ¨ä½œç±»å‹ï¼ŒY=å¸§åºåˆ—ï¼‰ï¼Œä¸æ˜¯ç®€å•çš„idle/walk_downç­‰å…³é”®è¯
3. **åŠ¨ç”»å¸§ç‡å’Œè¿åŠ¨é€Ÿåº¦ä¸åŒ¹é…** - éœ€è¦ç¡®ä¿åŠ¨ç”»å¸§ç‡ä¸Hero.moveDurationä¸€è‡´

## ä¿®å¤æ–¹æ¡ˆ

### 1. æ­£ç¡®ç†è§£warrior.pngçš„spriteç»“æ„

warrior.pngä¸­æœ‰68ä¸ªspritesï¼Œç»„ç»‡å¦‚ä¸‹ï¼š
- `warrior_0_0` ~ `warrior_0_20` (21å¸§) = åŠ¨ä½œ0 (Idle)
- `warrior_1_0` ~ `warrior_1_20` (21å¸§) = åŠ¨ä½œ1 (WalkDown)
- `warrior_2_0` ~ `warrior_2_20` (21å¸§) = åŠ¨ä½œ2 (WalkUp)
- `warrior_3_0` ~ `warrior_3_20` (21å¸§) = åŠ¨ä½œ3 (WalkLeft)
- `warrior_4_0` ~ `warrior_4_20` (21å¸§) = åŠ¨ä½œ4 (WalkRight)
- `warrior_5_0` ~ `warrior_5_20` (21å¸§) = åŠ¨ä½œ5 (Attack)
- `warrior_6_0` ~ `warrior_6_20` (21å¸§) = åŠ¨ä½œ6 (Death)

### 2. æ”¹è¿›çš„LoadWarriorSpriteså®ç°

```csharp
public void LoadWarriorSprites()
{
    // ä»AssetDatabaseåŠ è½½ï¼ˆåœ¨ç¼–è¾‘å™¨æ¨¡å¼ä¸‹ï¼‰
    Sprite[] allSprites = Resources.LoadAll<Sprite>("Characters/warrior");
    
    if (allSprites == null || allSprites.Length == 0)
    {
        // å°è¯•ä»AssetDatabaseåŠ è½½
        allSprites = LoadSpritesFromAssetDatabase();
    }
    
    // æŒ‰warrior_X_Yæ ¼å¼è§£æå¹¶åˆ†ç±»
    AssignSpritesToAnimations(allSprites);
}

private void AssignSpritesToAnimations(Sprite[] allSprites)
{
    // åˆ›å»ºå­—å…¸æŒ‰åŠ¨ä½œç¼–å·åˆ†ç»„
    var actionSprites = new Dictionary<int, List<Sprite>>();
    
    foreach (Sprite sprite in allSprites)
    {
        // åŒ¹é… warrior_X_Y æ ¼å¼
        var match = Regex.Match(sprite.name, @"warrior_(\d+)_(\d+)");
        if (match.Success)
        {
            int actionType = int.Parse(match.Groups[1].Value);
            actionSprites[actionType].Add(sprite);
        }
    }
    
    // æŒ‰SPDçº¦å®šåˆ†é…
    idleSprites = SortAndReturnSprites(actionSprites, 0);
    walkDownSprites = SortAndReturnSprites(actionSprites, 1);
    walkUpSprites = SortAndReturnSprites(actionSprites, 2);
    walkLeftSprites = SortAndReturnSprites(actionSprites, 3);
    walkRightSprites = SortAndReturnSprites(actionSprites, 4);
}

private Sprite[] SortAndReturnSprites(Dictionary<int, List<Sprite>> actionSprites, int actionType)
{
    // æŒ‰å¸§åºåˆ—å·æ’åº
    var sorted = actionSprites[actionType]
        .OrderBy(s => int.Parse(Regex.Match(s.name, @"warrior_\d+_(\d+)").Groups[1].Value))
        .ToArray();
    return sorted;
}
```

### 3. è‡ªåŠ¨åˆå§‹åŒ–æœºåˆ¶

åœ¨HeroAnimator.Start()ä¸­è‡ªåŠ¨è°ƒç”¨LoadWarriorSprites()ï¼š

```csharp
private void Start()
{
    // å¦‚æœå°šæœªåŠ è½½spritesï¼Œè‡ªåŠ¨åŠ è½½
    if ((idleSprites == null || idleSprites.Length == 0) &&
        (walkDownSprites == null || walkDownSprites.Length == 0))
    {
        LoadWarriorSprites();
    }
}
```

## æµ‹è¯•æ­¥éª¤

1. æ‰“å¼€Game.unityåœºæ™¯
2. è¿›å…¥Playæ¨¡å¼
3. Heroåº”è¯¥è‡ªåŠ¨ç”Ÿæˆå¹¶æ˜¾ç¤ºidleåŠ¨ç”»
4. æŒ‰WASDç§»åŠ¨Heroï¼Œè§‚å¯Ÿå¯¹åº”æ–¹å‘çš„è¡Œèµ°åŠ¨ç”»
5. æŸ¥çœ‹Consoleæ—¥å¿—ç¡®è®¤spriteså·²æ­£ç¡®åŠ è½½

## é¢„æœŸç»“æœ

```
âœ“ åŠ è½½äº† 68 ä¸ªwarrior sprite
âœ“ ä»AssetDatabaseåŠ è½½ 68 ä¸ªsprites
âœ“ åŠ¨ç”»å¸§åˆ†é…å®Œæˆ:
  Idle: 21 frames
  WalkDown: 21 frames
  WalkUp: 21 frames
  WalkLeft: 21 frames
  WalkRight: 21 frames
```

## è°ƒè¯•å·¥å…·

å·²åˆ›å»ºç¼–è¾‘å™¨å·¥å…· `TestHeroAnimationLoading.cs`ï¼Œå¯é€šè¿‡èœå• **Tools > Test > Load Game Scene and Test Hero Animation** å¿«é€Ÿæµ‹è¯•HeroåŠ¨ç”»åŠ è½½ã€‚

