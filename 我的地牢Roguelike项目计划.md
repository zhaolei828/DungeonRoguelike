# 我的地牢Roguelike游戏 - 完整项目计划

> 一个2D俯视角地牢探索Roguelike游戏的完整开发计划
> 
> **项目周期**：8周（MVP可玩版本）  
> **开发模式**：个人独立开发  
> **目标平台**：PC（后期可扩展到手机）

---

## 📋 项目概述

### 游戏类型
- **核心玩法**：2D俯视角地牢探索Roguelike
- **美术风格**：像素风格
- **参考游戏**：《元气骑士》《进入地牢》《Shattered Pixel Dungeon》

### 核心特性（MVP版本）
```
✅ 程序化随机地图生成
✅ 流畅的角色控制（八方向移动）
✅ 近战战斗系统
✅ 3-5种敌人类型
✅ 基础道具系统（武器、药水）
✅ 简单的进度系统（通关5层）
✅ 死亡重来（Roguelike核心）
```

### 技术栈
```
游戏引擎：Unity 2022.3 LTS
开发语言：C#
项目模板：2D (URP)

必备Package：
├── Cinemachine（相机跟随）
├── Input System（新输入系统）
└── 2D Tilemap Editor（地图编辑）

可选Package：
├── DOTween（动画插值）
└── TextMeshPro（文字显示）

版本控制：Git + GitHub
```

---

## 🗓️ 详细时间表

### 📅 Week 1: 环境搭建与学习（2024-10-21 ~ 10-27）

#### Day 1-2（周一-周二）：环境准备
```
□ 安装Unity 2022.3 LTS
  - Unity Hub下载安装
  - 选择2022.3.x LTS版本
  - 包含模块：Windows Build Support

□ 创建项目
  - 项目名：MyDungeonRoguelike
  - 模板：2D (URP)
  - 位置：选择合适的工作目录

□ 项目结构设置
  Assets/
  ├── _Project/           # 主项目文件夹
  │   ├── Scenes/        # 场景
  │   ├── Scripts/       # 代码
  │   ├── Prefabs/       # 预制体
  │   ├── Sprites/       # 图片
  │   ├── Audio/         # 音频
  │   └── Data/          # ScriptableObject配置
  └── Plugins/           # 第三方插件

□ 导入Package Manager包
  - Cinemachine
  - Input System
  - 2D Tilemap Editor

□ Git初始化
  git init
  git add .
  git commit -m "Initial commit"
```

#### Day 3-4（周三-周四）：学习参考项目
```
□ 下载参考项目
  方案A：Unity官方教程
  - Unity Learn → 2D Roguelike
  
  方案B：GitHub项目
  - 搜索：Unity 2D Roguelike Tutorial
  - 下载Stars最多的项目

□ 运行参考项目
  - 用Unity打开
  - 运行游戏，体验玩法
  - 截图记录关键功能

□ 代码阅读（不要全看！）
  - 只看这些文件：
    * GameManager.cs
    * Player.cs / PlayerController.cs
    * Enemy.cs
    * BoardManager.cs / LevelGenerator.cs
  
□ 提取学习笔记
  - 创建文档：学习笔记.md
  - 记录关键设计思路
  - 列出可复用的代码片段
```

#### Day 5（周五）：美术资源获取
```
□ 下载免费像素资源
  推荐来源：
  ├── itch.io: "0x72 Dungeon Tileset II"
  ├── Kenney.nl: "Roguelike Pack"
  └── OpenGameArt.org: "Dungeon Tileset"

□ 导入到Unity
  - 放到 Assets/_Project/Sprites/
  - 设置 Sprite Mode: Multiple
  - Pixels Per Unit: 16（根据资源调整）
  - Filter Mode: Point (no filter)
  - Compression: None

□ 创建Tilemap调色板
  - Window → 2D → Tile Palette
  - 创建 "Dungeon" 调色板
  - 拖入地板、墙壁瓦片

□ 测试手动绘制房间
  - 创建测试场景
  - 用Tile Palette画一个房间
  - 确认视觉效果满意
```

#### Day 6-7（周末）：核心系统设计
```
□ 设计游戏系统架构
  创建文档：系统设计.md
  
  设计内容：
  1. 角色系统
     - 玩家属性（HP、攻击力、速度）
     - 敌人类型和属性
  
  2. 战斗系统
     - 攻击判定方式（碰撞检测？范围检测？）
     - 伤害计算公式
     - 击退效果
  
  3. 地图系统
     - 房间大小范围
     - 房间数量范围
     - 连接方式
  
  4. 道具系统
     - 道具类型（武器、药水、钥匙）
     - 掉落概率
     - 装备方式

□ 创建核心脚本框架
  只创建空脚本，定义结构：
  
  Scripts/
  ├── Core/
  │   ├── GameManager.cs
  │   └── LevelManager.cs
  ├── Player/
  │   ├── PlayerController.cs
  │   ├── PlayerHealth.cs
  │   └── PlayerInventory.cs
  ├── Enemy/
  │   ├── Enemy.cs
  │   └── EnemyAI.cs
  ├── Map/
  │   ├── LevelGenerator.cs
  │   └── Room.cs
  └── Items/
      ├── Item.cs
      └── Weapon.cs

□ 周总结
  - 回顾本周完成的内容
  - 调整下周计划
  - 确保环境完全就绪
```

---

### 📅 Week 2: 玩家控制器（2024-10-28 ~ 11-03）

#### Day 1-2：基础移动
```
□ 创建玩家对象
  - GameObject → 2D Object → Sprite
  - 命名：Player
  - 添加Rigidbody2D（Dynamic）
  - 添加BoxCollider2D
  - 设置Layer：Player

□ Input System配置
  - 创建 Input Actions Asset
  - 命名：PlayerInputActions
  - 添加Action Map：Player
  - 添加Actions：
    * Move (Value, Vector2)
    * Attack (Button)
  - Generate C# Class

□ 实现PlayerController.cs
  功能：
  - 接收输入（Input System）
  - 八方向移动
  - 移动速度可调节
  - 碰撞检测

□ 测试和调优
  - 手感调节（速度、加速度）
  - 碰撞检测（不穿墙）
  - 确认流畅性
```

#### Day 3：动画系统
```
□ 创建动画控制器
  - 创建Animator Controller
  - 定义States：
    * Idle（待机）
    * Walk（移动）
    * Attack（攻击）
    * Hit（受伤）
    * Die（死亡）

□ 创建动画
  - Window → Animation
  - Idle动画（静止或呼吸）
  - Walk动画（4方向或8方向）
  - Attack动画
  - Hit动画（闪烁）
  - Die动画（消失）

□ 状态转换
  - 设置Parameters：
    * IsMoving (Bool)
    * Attack (Trigger)
    * Hit (Trigger)
    * Die (Trigger)
  - 连接状态转换

□ 整合到PlayerController
  - 根据移动状态触发动画
  - 测试动画流畅性
```

#### Day 4-5：战斗系统
```
□ 实现攻击检测
  方案：范围检测
  
  代码要点：
  - 攻击按钮触发
  - 在玩家前方创建检测区域
  - Physics2D.OverlapCircle检测敌人
  - 对检测到的敌人造成伤害

□ 攻击动画和特效
  - 播放攻击动画
  - 添加攻击音效
  - 简单的攻击特效（可选）

□ 攻击冷却
  - 设置攻击间隔（0.5秒）
  - 冷却期间不能攻击
  - UI显示冷却（可选）

□ 测试战斗手感
  - 攻击范围合理性
  - 攻击反馈明显
  - 调整参数直到满意
```

#### Day 6-7（周末）：生命值系统
```
□ 实现PlayerHealth.cs
  功能：
  - 当前HP和最大HP
  - TakeDamage()方法
  - Heal()方法
  - OnHealthChanged事件
  - Die()方法

□ 受伤反馈
  - 播放受伤动画
  - 屏幕震动（可选）
  - 受伤音效
  - 无敌帧（0.5秒）

□ UI - 生命值显示
  - 创建Canvas
  - 添加HP条（Slider或Image）
  - 绑定到PlayerHealth事件
  - 测试HP变化时UI更新

□ 死亡处理
  - 播放死亡动画
  - 游戏结束逻辑
  - 显示Game Over界面

□ 周总结和Git提交
  git add .
  git commit -m "完成玩家控制和战斗系统"
```

---

### 📅 Week 3: 地图生成系统（2024-11-04 ~ 11-10）

#### Day 1-2：房间生成
```
□ 设计Room类
  public class Room {
      public Vector2Int Position;
      public int Width;
      public int Height;
      public Vector2Int Center { get; }
  }

□ 实现基础生成器
  LevelGenerator.cs:
  - 随机创建5-10个房间
  - 房间大小：3x3 到 8x8
  - 房间位置随机
  - 检测重叠（简单间距检查）

□ 可视化测试
  - 用Gizmos在Scene视图显示房间
  - 调试房间生成逻辑
  - 确保没有重叠

□ 实例化房间
  - 根据房间数据创建地板
  - 使用Tilemap或Prefab
  - 测试生成效果
```

#### Day 3：连接房间
```
□ 实现房间连接算法
  简单方案：
  - 连接相邻房间（顺序连接）
  - 创建L型走廊
  
  进阶方案（可选）：
  - 最小生成树算法
  - 确保所有房间可达

□ 绘制走廊
  - 在地图数据中标记走廊
  - 实例化走廊瓦片
  - 确保走廊连通

□ 放置门
  - 在房间和走廊连接处
  - 门可以打开/关闭
  - 门的碰撞处理
```

#### Day 4：墙壁生成
```
□ 自动生成墙壁
  算法：
  - 遍历所有地板格子
  - 检查8个方向的邻居
  - 如果邻居是空的→放置墙

□ 墙壁瓦片处理
  - 使用RuleTile自动匹配
  - 或手动设置墙壁类型
  
□ 碰撞设置
  - 墙壁添加Collider
  - 设置Layer：Obstacle
  - 测试玩家不能穿墙
```

#### Day 5：起始点和出口
```
□ 放置玩家起始位置
  - 在第一个房间中心
  - 实例化玩家
  - 相机跟随设置

□ 放置楼梯/出口
  - 在最后一个房间
  - 创建Stair预制体
  - 交互进入下一层

□ 关卡切换
  - 进入楼梯触发
  - 重新生成地图
  - 玩家重置位置
  - 关卡计数+1
```

#### Day 6-7（周末）：优化和完善
```
□ 地图生成优化
  - 确保至少有一条路径
  - 避免生成不合理的房间
  - 调整参数（房间大小、数量）

□ 小地图系统（可选）
  - UI显示小地图
  - 标记当前位置
  - 显示已探索区域

□ 房间类型变化（可选）
  - 普通房间
  - 宝箱房间
  - 怪物房间
  - Boss房间

□ 周总结
  - 测试地图生成稳定性
  - 多次生成确保没有Bug
  - Git提交
```

---

### 📅 Week 4: 敌人系统（2024-11-11 ~ 11-17）

#### Day 1-2：敌人基础
```
□ 创建Enemy基类
  Enemy.cs:
  - HP、攻击力、移动速度
  - TakeDamage()方法
  - Die()方法
  
□ 创建第一个敌人
  - 使用精灵图
  - 添加Rigidbody2D
  - 添加Collider
  - 设置Layer：Enemy

□ 敌人生命值
  - HP系统
  - 受伤反馈（闪烁）
  - 死亡动画
  - 销毁对象

□ 掉落系统（简单版）
  - 死亡时掉落金币
  - 或掉落道具（随机）
```

#### Day 3-4：敌人AI
```
□ 简单追逐AI
  状态机：
  - Idle（待机）
  - Patrol（巡逻，可选）
  - Chase（追逐玩家）
  - Attack（攻击玩家）

□ 检测玩家
  - 设置检测范围（5格）
  - 使用Physics2D.OverlapCircle
  - 或距离检测

□ 追逐逻辑
  - 计算到玩家的方向
  - 移动向玩家
  - 保持一定距离

□ 攻击逻辑
  - 靠近玩家后攻击
  - 攻击间隔
  - 造成伤害给玩家
```

#### Day 5：多种敌人
```
□ 创建2-3种不同敌人
  类型1：近战（慢速，高HP）
  - 追到玩家后近战攻击
  
  类型2：远程（快速，低HP）
  - 保持距离，射击子弹
  
  类型3：特殊（可选）
  - 爆炸型
  - 召唤型等

□ 敌人属性差异化
  - 不同的HP
  - 不同的速度
  - 不同的攻击方式
  - 不同的精灵图

□ 测试敌人平衡性
  - 不能太强（玩家无法打败）
  - 不能太弱（没有挑战）
  - 调整参数
```

#### Day 6-7（周末）：敌人生成
```
□ 房间敌人生成
  - 每个房间生成1-3个敌人
  - 随机选择敌人类型
  - 随机位置（避免重叠）

□ 房间清理机制
  - 进入房间→关闭门
  - 消灭所有敌人→打开门
  - 给予奖励

□ 难度递增
  - 根据楼层增加敌人数量
  - 提高敌人属性
  - 出现更强的敌人类型

□ 周总结
  - 测试战斗平衡
  - 调整敌人强度
  - Git提交
```

---

### 📅 Week 5: 道具系统（2024-11-18 ~ 11-24）

#### Day 1-2：道具基础
```
□ 设计Item系统
  使用ScriptableObject：
  
  [CreateAssetMenu]
  public class ItemData : ScriptableObject {
      public string itemName;
      public Sprite icon;
      public ItemType type;
      public int value;
  }

□ 创建道具类型
  - 武器（提升攻击力）
  - 药水（恢复HP）
  - 钥匙（开门）
  - 金币（计分）

□ 道具拾取
  - 玩家碰到道具
  - 触发拾取
  - 播放音效
  - 销毁道具对象
```

#### Day 3：武器系统
```
□ 武器类型
  - 短剑（快速，低伤害）
  - 大剑（慢速，高伤害）
  - 长矛（远距离）

□ 武器切换
  - 玩家可持有多把武器
  - 按键切换（1,2,3）
  - UI显示当前武器

□ 武器属性影响战斗
  - 不同的攻击范围
  - 不同的伤害值
  - 不同的攻击速度

□ 武器视觉效果
  - 显示不同的武器精灵
  - 攻击动画差异
```

#### Day 4：背包系统（简化版）
```
□ Inventory类
  - 存储道具列表
  - Add/Remove方法
  - 检查道具数量

□ UI - 背包界面
  - 按Tab打开/关闭
  - 显示所有道具
  - 点击使用道具

□ 道具使用
  - 药水：恢复HP
  - 钥匙：开门
  - 其他消耗品
```

#### Day 5-7（周末）：掉落和宝箱
```
□ 敌人掉落
  - 死亡时随机掉落
  - 掉落表配置
  - 掉落概率

□ 宝箱系统
  - 创建宝箱预制体
  - 放置在特定房间
  - 交互打开
  - 掉落随机道具

□ 商店系统（可选）
  - NPC商人
  - 用金币购买道具
  - 商店房间

□ 周总结和测试
  - 测试道具获取流程
  - 平衡掉落概率
  - Git提交
```

---

### 📅 Week 6: UI和游戏流程（2024-11-25 ~ 12-01）

#### Day 1-2：游戏UI
```
□ HUD（游戏中UI）
  - 生命值条
  - 金币数量
  - 当前楼层
  - 当前武器

□ 暂停菜单
  - 按ESC打开
  - 继续游戏
  - 设置
  - 退出游戏

□ 设置界面
  - 音量调节
  - 音效开关
  - 分辨率（可选）
```

#### Day 3：主菜单
```
□ 创建主菜单场景
  - 游戏标题
  - 开始游戏按钮
  - 设置按钮
  - 退出按钮

□ 场景切换
  - 主菜单 → 游戏场景
  - SceneManager.LoadScene

□ 简单的背景
  - 静态图片
  - 或简单动画
```

#### Day 4：游戏结束
```
□ 胜利界面
  - 通关所有楼层后显示
  - 显示统计（击杀数、金币等）
  - 返回主菜单

□ 失败界面
  - 玩家死亡后显示
  - 显示存活时间
  - 重新开始
  - 返回主菜单

□ 统计系统
  - 记录游戏数据
  - 击杀数
  - 金币收集
  - 楼层到达
```

#### Day 5-7（周末）：游戏流程完善
```
□ 完整游戏循环
  启动游戏 → 主菜单 → 开始 → 游戏 → 死亡/胜利 → 结算 → 主菜单

□ 存档系统（简化版）
  - PlayerPrefs存储
  - 最高分
  - 最深楼层

□ 成就系统（可选）
  - 击杀X个敌人
  - 到达X层
  - 收集X金币

□ 周总结
  - 完整测试游戏流程
  - 确保没有死循环
  - Git提交
```

---

### 📅 Week 7: 音效和特效（2024-12-02 ~ 12-08）

#### Day 1-2：音效
```
□ 获取音效资源
  来源：
  - Freesound.org
  - OpenGameArt.org
  - Kenney.nl

  需要的音效：
  - 攻击音效
  - 受伤音效
  - 死亡音效
  - 拾取道具
  - 开门/关门
  - UI点击

□ 音效管理器
  AudioManager.cs:
  - 单例模式
  - PlaySound()方法
  - 音量控制

□ 整合音效到游戏
  - 所有交互添加音效
  - 测试音量平衡
```

#### Day 3：背景音乐
```
□ 获取BGM
  - 主菜单音乐
  - 游戏中音乐
  - Boss战音乐（可选）

□ 音乐循环播放
  - AudioSource设置Loop
  - 场景切换时切换音乐

□ 音乐淡入淡出
  - 使用DOTween或协程
  - 平滑过渡
```

#### Day 4-5：视觉特效
```
□ 攻击特效
  - 粒子系统
  - 或精灵动画
  - 刀光效果

□ 受伤特效
  - 血液飞溅（像素）
  - 闪烁效果
  - 屏幕震动

□ 其他特效
  - 道具掉落光效
  - 传送门特效
  - UI动画（Tween）

□ 相机效果
  - Cinemachine震动
  - 跟随平滑
```

#### Day 6-7（周末）：打磨细节
```
□ 粒子特效优化
  - 性能检查
  - 视觉效果调优

□ UI动画
  - 按钮hover效果
  - 菜单滑入滑出
  - HP条平滑变化

□ 过场动画（可选）
  - 进入地下城
  - Boss出场
  - 通关动画

□ 周总结
  - 游戏感觉大幅提升
  - Git提交
```

---

### 📅 Week 8: 测试和发布（2024-12-09 ~ 12-15）

#### Day 1-3：全面测试
```
□ 功能测试
  - 所有功能都能用
  - 没有空指针异常
  - UI正常显示

□ 平衡性测试
  - 游戏难度合适
  - 不会太简单
  - 不会太难

□ Bug修复
  - 记录所有Bug
  - 优先级排序
  - 逐个修复

□ 性能测试
  - 保持60FPS
  - 内存不泄漏
  - 加载时间合理
```

#### Day 4-5：优化和打磨
```
□ 代码优化
  - 对象池（敌人、特效）
  - 减少GC
  - 优化地图生成

□ 资源优化
  - Sprite Atlas打包
  - 音频压缩
  - 减少Build大小

□ 最后的打磨
  - 数值微调
  - UI细节
  - 特效完善
```

#### Day 6-7（周末）：打包发布
```
□ 打包Windows版本
  - Build Settings
  - Player Settings
  - Build
  - 测试打包后的版本

□ 创建游戏页面
  选择平台：
  - itch.io（推荐）
  - Steam（需要费用）
  - 自己的网站

□ 准备发布材料
  - 游戏截图（5-10张）
  - 游戏视频（1-2分钟）
  - 游戏描述
  - 操作说明

□ 发布！
  - 上传游戏文件
  - 填写游戏信息
  - 设置价格（免费/付费）
  - 发布

□ 项目总结
  - 写开发日志
  - 总结经验教训
  - 规划后续更新
```

---

## 📊 里程碑检查表

### Milestone 1 - Week 2结束
```
✓ 玩家可以流畅移动
✓ 攻击系统可用
✓ 动画正常播放
✓ 生命值系统工作
```

### Milestone 2 - Week 4结束
```
✓ 地图能随机生成
✓ 房间正确连接
✓ 敌人可以战斗
✓ 敌人AI正常工作
```

### Milestone 3 - Week 6结束
```
✓ 道具系统完整
✓ 游戏有开始和结束
✓ UI界面完善
✓ 游戏循环完整
```

### Milestone 4 - Week 8结束（MVP完成）
```
✓ 音效和音乐齐全
✓ 视觉特效到位
✓ 没有重大Bug
✓ 可以发布的版本
```

---

## 🎯 每日工作流程建议

### 工作时间分配（每天3-4小时）
```
08:00 - 09:00  规划今日任务
09:00 - 11:00  编码开发
11:00 - 11:30  测试和调试
11:30 - 12:00  记录和Git提交
```

### 每日工作模板
```
1. 检查今日任务清单
2. 专注完成1-2个核心任务
3. 测试新增功能
4. Git提交（每天至少一次）
5. 更新项目日志
```

---

## 📝 项目管理建议

### 使用Trello或Notion管理任务
```
列表：
├── 待办（To Do）
├── 进行中（In Progress）
├── 测试中（Testing）
└── 完成（Done）
```

### Git提交规范
```
feat: 新功能
fix: Bug修复
refactor: 重构
docs: 文档更新
test: 测试相关

例如：
git commit -m "feat: 实现玩家移动控制"
git commit -m "fix: 修复敌人穿墙Bug"
```

---

## 🚨 风险管理

### 可能遇到的问题和应对

**问题1：进度落后**
```
应对：
- 砍掉非核心功能
- 简化系统设计
- 延长1-2周（总共10周）
```

**问题2：技术难题**
```
应对：
- 查阅Unity文档
- 搜索Stack Overflow
- 查看参考项目
- 寻求帮助（问我！）
```

**问题3：缺少美术资源**
```
应对：
- 使用更多免费资源
- 简化视觉风格
- 用基础形状代替（方块人）
```

**问题4：游戏不好玩**
```
应对：
- 找人试玩收集反馈
- 参考优秀游戏
- 调整核心参数
- 重新设计核心玩法
```

---

## 🎁 MVP后的扩展计划（Week 9+）

### 第一批扩展（+2周）
```
- 更多敌人类型（10种）
- Boss战设计
- 更多道具（20种）
- 技能系统
- 角色升级
```

### 第二批扩展（+3周）
```
- 多个可选角色
- 永久升级系统
- 更多房间类型
- 特殊事件房间
- 成就系统完善
```

### 第三批扩展（+4周）
```
- 每日挑战
- 排行榜
- 云存档
- 手机版适配
- Steam成就
```

### 联机功能（需要时）
```
- 使用Mirror网络库（2-3周）
- 或ET框架（4-6周）
- 2人合作模式
- 竞技模式
```

---

## 📞 需要帮助？

### 开发过程中的支持

我可以帮助您：
```
✅ 解决技术问题
✅ 调试代码错误
✅ 优化游戏性能
✅ 设计游戏机制
✅ 平衡游戏数值
✅ 代码审查
✅ 提供资源链接
```

### 定期检查点

建议每周总结时：
```
1. 回顾本周完成的内容
2. 遇到的问题和解决方案
3. 下周计划调整
4. 截图/视频记录进度
```

---

## 🎉 成功标准

### MVP版本的定义
```
一个可玩的游戏，具备：
✓ 能玩完整一局（开始到结束）
✓ 有核心玩法乐趣
✓ 没有重大Bug
✓ 可以分享给朋友试玩
```

### 完成后的成就
```
🎉 完成了一个完整的游戏项目
🎉 掌握了Unity 2D开发
🎉 理解了游戏系统设计
🎉 建立了开发流程
🎉 有了可展示的作品
🎉 为下一个项目打下基础
```

---

**项目计划版本**：v1.0  
**创建时间**：2025-10-15  
**预计完成时间**：2025-12-15（8周）  
**项目状态**：📋 规划中

**下一步行动**：开始 Week 1 Day 1 - 安装Unity！🚀

